# 要件定義書

## 概要

この機能は、AWS ServiceCatalog Factory用のGitHubリポジトリ構造を作成することです。ポートフォリオとプロダクトを別々のフォルダで整理するベストプラクティスに従います。このリポジトリはCodePipelineによって監視され、reinventポートフォリオとその関連プロダクトを含み、将来的により多くのポートフォリオとプロダクトが追加される際のスケーラビリティを考慮した構造になります。

## 要件

### 要件1

**ユーザーストーリー:** DevOpsエンジニアとして、ServiceCatalogポートフォリオを構造化されたフォルダ階層で整理したい。組織の成長に合わせて複数のポートフォリオを簡単に管理・拡張できるようにするため。

#### 受け入れ基準

1. リポジトリが作成されたとき、各ポートフォリオのサブディレクトリを持つportfoliosディレクトリを含むこと
2. 新しいポートフォリオが追加されたとき、portfolios/配下の独自のサブディレクトリに配置されること
3. ポートフォリオ構造を確認したとき、AWS ServiceCatalog Factoryドキュメントのフォルダ構造パターンに従うこと
4. ポートフォリオが複数のプロダクトを含む場合、各プロダクトは別々のサブディレクトリに整理されること

### 要件2

**ユーザーストーリー:** 開発者として、プロダクト定義をポートフォリオ定義から分離したい。プロダクトのバージョンと設定を独立して管理できるようにするため。

#### 受け入れ基準

1. プロダクトが定義されたとき、別のproductsディレクトリ構造に保存されること
2. プロダクトが複数のバージョンを持つとき、各バージョンは独自のサブディレクトリに配置されること
3. ポートフォリオでプロダクトを参照するとき、ポートフォリオは構造化されたパスでプロダクトを参照すること
4. プロダクトが更新されたとき、ポートフォリオ定義の変更を必要としないこと

### 要件3

**ユーザーストーリー:** システム管理者として、リポジトリにreinventポートフォリオ設定を含めたい。CodePipelineがサンプルポートフォリオとプロダクトをデプロイできるようにするため。

#### 受け入れ基準

1. リポジトリが初期化されたとき、reinventポートフォリオ設定を含むこと
2. reinventポートフォリオが定義されたとき、ec2-instanceプロダクトを含むこと
3. プロダクトが設定されたとき、初期状態ではバージョンv1のみを含むこと
4. CodePipelineがリポジトリを処理するとき、定義されたすべてのポートフォリオとプロダクトをデプロイできること

### 要件4

**ユーザーストーリー:** リポジトリメンテナーとして、reinvent.yamlの内容に基づいた明確なファイル命名規則を持ちたい。構造が直感的で確立されたパターンに従うようにするため。

#### 受け入れ基準

1. ファイルが作成されたとき、reinvent.yamlのポートフォリオとプロダクト名に基づいた説明的な名前を使用すること
2. フォルダが構造化されたとき、AWSドキュメントの例の命名規則に従うこと
3. 新しいアイテムが追加されたとき、一貫性のために同じ命名パターンに従うこと
4. ファイル名にスペースや特殊文字が含まれる場合、適切なファイルシステム安全な名前に変換されること